---
id: crear-una-validacion-documento-registro-aplicacion
title: Crear una Validación de Documento de Registro de Aplicación
description: Crea una validación de documento para un registro de aplicación para verificar documentos de identidad
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

### Endpoint

```
POST https://api.verifik.co/v2/document-validations/app-registration
```

Una Validación de Documento es una instancia dentro del sistema de Verifik que te permite procesar y validar documentos de identidad durante el proceso de registro de aplicación. Este proceso asegura la autenticidad de los documentos del usuario y proporciona verificación segura a través de varios métodos de análisis.

:::warning
El Token JWT que debes usar al crear `Validaciones de Documento de Registro de Aplicación` se proporciona desde el `Registro de Aplicación` en creación. Debes usar el token devuelto al crear un [Registro de Aplicación](crear-un-registro-aplicacion) para autenticar esta solicitud.
:::

### Headers

| Name | Value |
| --- | --- |
| Content-Type | `application/json` |
| Authorization | `Bearer <token>` |

### Params

| Name | Type | Required | Description |
| --- | --- | --- | --- |
| `image` | string | No | La imagen codificada en base64 del documento que será escaneado y analizado. Se requiere `image` o `backImage` |
| `backImage` | string | No | La imagen codificada en base64 del reverso del documento que será escaneado y analizado. Se requiere `image` o `backImage` |
| `force` | boolean | No | Usa `force` para sobrescribir valores de intentos anteriores. Cuando se establece en `true`, esto permitirá crear una nueva validación de documento incluso si ya existe una para el registro de aplicación. Por defecto: `false` |

### Request

<Tabs>
  <TabItem value="node" label="Node.js">

```javascript
const fetch = require("node-fetch");

async function run() {
  const res = await fetch("https://api.verifik.co/v2/document-validations/app-registration", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      Authorization: `Bearer ${process.env.VERIFIK_TOKEN}`,
    },
    body: JSON.stringify({
      image: "base64_encoded_document_image",
      backImage: "base64_encoded_back_image",
      force: true
    }),
  });
  console.log(await res.json());
}

run();
```

  </TabItem>
  <TabItem value="php" label="PHP">

```php
<?php
$ch = curl_init("https://api.verifik.co/v2/document-validations/app-registration");
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    "Content-Type: application/json",
    "Authorization: Bearer " . getenv("VERIFIK_TOKEN")
]);
$body = json_encode([
    "image" => "base64_encoded_document_image",
    "backImage" => "base64_encoded_back_image",
    "force" => true
]);
curl_setopt($ch, CURLOPT_POSTFIELDS, $body);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$response = curl_exec($ch);
curl_close($ch);
echo $response;
```

  </TabItem>
  <TabItem value="python" label="Python">

```python
import os, requests

url = "https://api.verifik.co/v2/document-validations/app-registration"
headers = {
    "Content-Type": "application/json",
    "Authorization": f"Bearer {os.getenv('VERIFIK_TOKEN')}"
}
payload = {
    "image": "base64_encoded_document_image",
    "backImage": "base64_encoded_back_image",
    "force": True
}
r = requests.post(url, json=payload, headers=headers)
print(r.json())
```

  </TabItem>
  <TabItem value="go" label="Go">

```go
package main

import (
    "bytes"
    "encoding/json"
    "fmt"
    "net/http"
    "os"
)

func main() {
    payload := map[string]interface{}{
        "image": "base64_encoded_document_image",
        "backImage": "base64_encoded_back_image",
        "force": true,
    }
    b, _ := json.Marshal(payload)
    req, _ := http.NewRequest("POST", "https://api.verifik.co/v2/document-validations/app-registration", bytes.NewBuffer(b))
    req.Header.Set("Content-Type", "application/json")
    req.Header.Set("Authorization", "Bearer "+os.Getenv("VERIFIK_TOKEN"))
    resp, _ := http.DefaultClient.Do(req)
    defer resp.Body.Close()
    var out map[string]interface{}
    json.NewDecoder(resp.Body).Decode(&out)
    fmt.Println(out)
}
```

  </TabItem>
</Tabs>

### Response

<Tabs>
  <TabItem value="200" label="200">

```json
{
    "data": {
        "documentValidation": {
            "_id": "507f1f77bcf86cd799439011",
            "appRegistration": "507f1f77bcf86cd799439012",
            "client": "507f1f77bcf86cd799439013",
            "project": "507f1f77bcf86cd799439014",
            "projectFlow": "507f1f77bcf86cd799439015",
            "documentType": "Passport",
            "documentCategory": "ID",
            "status": "ASSESSING",
            "validationMethod": "OCR",
            "inputMethod": "FILE_UPLOAD",
            "imageValidated": false,
            "namesMatch": false,
            "fullNameMatchPercentage": 0,
            "firstNameMatchPercentage": 0,
            "lastNameMatchPercentage": 0,
            "type": "validation",
            "createdAt": "2025-01-01T00:00:00.000Z",
            "updatedAt": "2025-01-01T00:00:00.000Z"
        }
    }
}
```

  </TabItem>
  <TabItem value="422" label="422">

```json
{
    "code": "MissingParameter",
    "message": "missing image"
}
```

  </TabItem>
  <TabItem value="422-image" label="422 (Falta Imagen o BackImage)">

```json
{
    "code": "MissingParameter",
    "message": "Either image or backImage must be provided"
}
```

  </TabItem>
  <TabItem value="409" label="409">

```json
{
    "code": "already_exists",
    "message": "409:already_exists"
}
```

Este error ocurre cuando ya existe una validación de documento para el registro de aplicación y el parámetro `force` no está establecido en `true`.

  </TabItem>
  <TabItem value="404-registration" label="404 (Registro de Aplicación No Encontrado)">

```json
{
    "code": "appRegistration_not_found",
    "message": "404:appRegistration_not_found"
}
```

  </TabItem>
  <TabItem value="404-settings" label="404 (Configuración de Documento No Establecida)">

```json
{
    "code": "document_settings_not_set",
    "message": "404:document_settings_not_set"
}
```

  </TabItem>
</Tabs>

### Notes

- **Registro de Aplicación Requerido**: Este endpoint requiere una sesión de registro de aplicación activa. Debes usar el token devuelto al crear un Registro de Aplicación.
- **Al Menos Una Imagen Requerida**: Se debe proporcionar `image` o `backImage` (o ambos) en la solicitud.
- **Procesamiento de Documentos**: Los documentos se procesan usando OCR (Reconocimiento Óptico de Caracteres) para extraer y validar información.
- **Valores de Estado**: El estado de validación del documento puede ser `ASSESSING`, `VALIDATED`, `FAILED`, u otros valores de estado dependiendo del proceso de validación.
- **Carga de Créditos**: Este endpoint carga automáticamente créditos de tu plan SmartEnroll.
- **Bandera Force**: Usa el parámetro `force` para sobrescribir validaciones de documento existentes si es necesario.

