"use strict";(self.webpackChunkverifik_documentation=self.webpackChunkverifik_documentation||[]).push([[53955],{5350:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"resources/app-registrations/create-an-app-registration-biometric-validation","title":"Create an App Registration Biometric Validation","description":"Create a biometric validation for an app registration using facial recognition and liveness detection","source":"@site/docs/resources/app-registrations/create-an-app-registration-biometric-validation.mdx","sourceDirName":"resources/app-registrations","slug":"/resources/app-registrations/create-an-app-registration-biometric-validation","permalink":"/resources/app-registrations/create-an-app-registration-biometric-validation","draft":false,"unlisted":false,"editUrl":"https://github.com/Open-Verifik/verifik-documentation/tree/main/docs/resources/app-registrations/create-an-app-registration-biometric-validation.mdx","tags":[],"version":"current","frontMatter":{"id":"create-an-app-registration-biometric-validation","title":"Create an App Registration Biometric Validation","description":"Create a biometric validation for an app registration using facial recognition and liveness detection"},"sidebar":"tutorialSidebar","previous":{"title":"List App Registrations","permalink":"/resources/app-registrations/list-all-app-registrations"},"next":{"title":"Create an App Registration Document Validation","permalink":"/resources/app-registrations/create-an-app-registration-document-validation"}}');var i=t(74848),a=t(28453),s=t(11470),o=t(19365);const l={id:"create-an-app-registration-biometric-validation",title:"Create an App Registration Biometric Validation",description:"Create a biometric validation for an app registration using facial recognition and liveness detection"},c=void 0,d={},u=[{value:"Endpoint",id:"endpoint",level:3},{value:"Headers",id:"headers",level:3},{value:"Params",id:"params",level:3},{value:"Request",id:"request",level:3},{value:"Response",id:"response",level:3},{value:"Notes",id:"notes",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h3,{id:"endpoint",children:"Endpoint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"POST https://api.verifik.co/v2/biometric-validations/app-registration\n"})}),"\n",(0,i.jsx)(n.p,{children:"A Biometric Validation is an instance within Verifik's system that allows you to process and validate user identities through facial recognition and liveness detection during the onboarding process. This process ensures the authenticity of users by verifying their unique biometric characteristics through advanced security technology. This endpoint is specifically designed for users who are in the middle of an app registration flow."}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["The JWT Token you should use when creating ",(0,i.jsx)(n.code,{children:"App Registration Biometric Validations"})," is provided from the ",(0,i.jsx)(n.code,{children:"App Registration"})," in creation. You must use the token returned when creating an ",(0,i.jsx)(n.a,{href:"create-an-app-registration",children:"App Registration"})," to authenticate this request."]})}),"\n",(0,i.jsx)(n.h3,{id:"headers",children:"Headers"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Name"}),(0,i.jsx)(n.th,{children:"Value"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Content-Type"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"application/json"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Authorization"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Bearer <token>"})})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"params",children:"Params"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Name"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"image"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsxs)(n.td,{children:["Base64 encoded facial image that will be used for biometric validation and liveness detection. The image should be in data URI format (e.g., ",(0,i.jsx)(n.code,{children:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQ..."}),")"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"os"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsxs)(n.td,{children:["Operating system of the device. Valid values: ",(0,i.jsx)(n.code,{children:"DESKTOP"}),", ",(0,i.jsx)(n.code,{children:"IOS"}),", ",(0,i.jsx)(n.code,{children:"ANDROID"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"force"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsxs)(n.td,{children:["Optional flag to force creation even if a person already exists. Defaults to ",(0,i.jsx)(n.code,{children:"false"}),". When set to ",(0,i.jsx)(n.code,{children:"true"}),", this will override existing person records if needed"]})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"request",children:"Request"}),"\n",(0,i.jsxs)(s.A,{children:[(0,i.jsx)(o.A,{value:"node",label:"Node.js",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'const fetch = require("node-fetch");\n\nasync function run() {\n  const res = await fetch("https://api.verifik.co/v2/biometric-validations/app-registration", {\n    method: "POST",\n    headers: {\n      "Content-Type": "application/json",\n      Authorization: `Bearer ${process.env.VERIFIK_TOKEN}`,\n    },\n    body: JSON.stringify({\n      image: "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQ...",\n      os: "DESKTOP"\n    }),\n  });\n  console.log(await res.json());\n}\n\nrun();\n'})})}),(0,i.jsx)(o.A,{value:"php",label:"PHP",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:'<?php\n$ch = curl_init("https://api.verifik.co/v2/biometric-validations/app-registration");\ncurl_setopt($ch, CURLOPT_HTTPHEADER, [\n    "Content-Type: application/json",\n    "Authorization: Bearer " . getenv("VERIFIK_TOKEN")\n]);\n$body = json_encode([\n    "image" => "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQ...",\n    "os" => "DESKTOP"\n]);\ncurl_setopt($ch, CURLOPT_POSTFIELDS, $body);\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\n$response = curl_exec($ch);\ncurl_close($ch);\necho $response;\n'})})}),(0,i.jsx)(o.A,{value:"python",label:"Python",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import os, requests\n\nurl = "https://api.verifik.co/v2/biometric-validations/app-registration"\nheaders = {\n    "Content-Type": "application/json",\n    "Authorization": f"Bearer {os.getenv(\'VERIFIK_TOKEN\')}"\n}\npayload = {\n    "image": "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQ...",\n    "os": "DESKTOP"\n}\nr = requests.post(url, json=payload, headers=headers)\nprint(r.json())\n'})})}),(0,i.jsx)(o.A,{value:"go",label:"Go",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "bytes"\n    "encoding/json"\n    "fmt"\n    "net/http"\n    "os"\n)\n\nfunc main() {\n    payload := map[string]interface{}{\n        "image": "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQ...",\n        "os": "DESKTOP",\n    }\n    b, _ := json.Marshal(payload)\n    req, _ := http.NewRequest("POST", "https://api.verifik.co/v2/biometric-validations/app-registration", bytes.NewBuffer(b))\n    req.Header.Set("Content-Type", "application/json")\n    req.Header.Set("Authorization", "Bearer "+os.Getenv("VERIFIK_TOKEN"))\n    resp, _ := http.DefaultClient.Do(req)\n    defer resp.Body.Close()\n    var out map[string]interface{}\n    json.NewDecoder(resp.Body).Decode(&out)\n    fmt.Println(out)\n}\n'})})})]}),"\n",(0,i.jsx)(n.h3,{id:"response",children:"Response"}),"\n",(0,i.jsxs)(s.A,{children:[(0,i.jsx)(o.A,{value:"200",label:"200",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "data": {\n        "_id": "674de8df21c72be3cc42b8a7",\n        "client": "507f1f77bcf86cd799439013",\n        "project": "507f1f77bcf86cd799439011",\n        "projectFlow": "507f1f77bcf86cd799439015",\n        "status": "STARTED",\n        "email": "user@example.com",\n        "countryCode": "+1",\n        "phone": "5551234567",\n        "biometricValidation": "674de8df21c72be3cc42b8a8",\n        "person": "674de8df21c72be3cc42b8a9",\n        "informationValidation": "674de8df21c72be3cc42b8a10",\n        "assignedCollection": "507f1f77bcf86cd799439016",\n        "createdAt": "2024-12-02T17:05:36.788Z",\n        "updatedAt": "2024-12-02T17:05:36.788Z"\n    }\n}\n'})})}),(0,i.jsx)(o.A,{value:"409-person",label:"409 (Person Already Set)",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "code": "person_already_set",\n    "message": "409:person_already_set"\n}\n'})})}),(0,i.jsxs)(o.A,{value:"409-liveness",label:"409 (Liveness Failed)",children:[(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "code": "liveness_failed",\n    "message": "409:liveness_failed@0.45"\n}\n'})}),(0,i.jsx)(n.p,{children:"The message includes the liveness score that failed the threshold."})]}),(0,i.jsx)(o.A,{value:"404",label:"404",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "code": "appRegistration_not_found",\n    "message": "404:appRegistration_not_found"\n}\n'})})}),(0,i.jsx)(o.A,{value:"409-collection",label:"409 (Collection Not Set)",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "code": "collection_not_set",\n    "message": "409:collection_not_set"\n}\n'})})})]}),"\n",(0,i.jsx)(n.h3,{id:"notes",children:"Notes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"App Registration Required"}),': This endpoint requires an active app registration session with status "STARTED" or "ONGOING".']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Liveness Detection"}),": Advanced anti-spoofing technology ensures the person being verified is physically present."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Collection Integration"}),": The project must have an assigned collection for biometric data storage."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Person Creation"}),": A person record is automatically created and linked to the app registration."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Credit Charging"}),": This endpoint automatically charges credits from your SmartEnroll plan."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Image Processing"}),": Facial images are processed for both biometric matching and liveness detection."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Force Flag"}),": Use the force flag to override existing person records if needed."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Liveness Configuration"}),": The system uses default liveness settings from the project flow (minimum score: 0.6, search mode: ACCURATE, search minimum score: 0.9). These can be customized in your project flow configuration."]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},11470:(e,n,t)=>{t.d(n,{A:()=>T});var r=t(96540),i=t(34164),a=t(17559),s=t(23104),o=t(56347),l=t(205),c=t(57485),d=t(31682),u=t(70679);function h(e){return r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,r.useMemo)(()=>{const e=n??function(e){return h(e).map(({props:{value:e,label:n,attributes:t,default:r}})=>({value:e,label:n,attributes:t,default:r}))}(t);return function(e){const n=(0,d.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,t])}function g({value:e,tabValues:n}){return n.some(n=>n.value===e)}function m({queryString:e=!1,groupId:n}){const t=(0,o.W6)(),i=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(i),(0,r.useCallback)(e=>{if(!i)return;const n=new URLSearchParams(t.location.search);n.set(i,e),t.replace({...t.location,search:n.toString()})},[i,t])]}function f(e){const{defaultValue:n,queryString:t=!1,groupId:i}=e,a=p(e),[s,o]=(0,r.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!g({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find(e=>e.default)??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:a})),[c,d]=m({queryString:t,groupId:i}),[h,f]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,i]=(0,u.Dv)(n);return[t,(0,r.useCallback)(e=>{n&&i.set(e)},[n,i])]}({groupId:i}),j=(()=>{const e=c??h;return g({value:e,tabValues:a})?e:null})();(0,l.A)(()=>{j&&o(j)},[j]);return{selectedValue:s,selectValue:(0,r.useCallback)(e=>{if(!g({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);o(e),d(e),f(e)},[d,f,a]),tabValues:a}}var j=t(92303);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=t(74848);function v({className:e,block:n,selectedValue:t,selectValue:r,tabValues:a}){const o=[],{blockElementScrollPositionUntilNextRender:l}=(0,s.a_)(),c=e=>{const n=e.currentTarget,i=o.indexOf(n),s=a[i].value;s!==t&&(l(n),r(s))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":n},e),children:a.map(({value:e,label:n,attributes:r})=>(0,b.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{o.push(e)},onKeyDown:d,onClick:c,...r,className:(0,i.A)("tabs__item",x.tabItem,r?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function A({lazy:e,children:n,selectedValue:t}){const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=a.find(e=>e.props.value===t);return e?(0,r.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:a.map((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function y(e){const n=f(e);return(0,b.jsxs)("div",{className:(0,i.A)(a.G.tabs.container,"tabs-container",x.tabList),children:[(0,b.jsx)(v,{...n,...e}),(0,b.jsx)(A,{...n,...e})]})}function T(e){const n=(0,j.A)();return(0,b.jsx)(y,{...e,children:h(e.children)},String(n))}},19365:(e,n,t)=>{t.d(n,{A:()=>s});t(96540);var r=t(34164);const i={tabItem:"tabItem_Ymn6"};var a=t(74848);function s({children:e,hidden:n,className:t}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,r.A)(i.tabItem,t),hidden:n,children:e})}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>o});var r=t(96540);const i={},a=r.createContext(i);function s(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);